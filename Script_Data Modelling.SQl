-- Generated by Oracle SQL Developer Data Modeler 22.2.0.165.1149
--   at:        2023-03-17 22:39:46 BRT
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



DROP TABLE t_sgv77_aval_produto CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_bairro CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_cat_produto CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_cat_videos CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_chamado CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_cidade CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_cliente CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_depto CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_endereco CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_fone_cliente CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_fone_ddd CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_fone_funcionario CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_funcionario CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_item_pedido CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_login CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_pedido CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_pf CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_pj CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_produto CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_tipo_logradouro CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_uf CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_videos CASCADE CONSTRAINTS;

DROP TABLE t_sgv77_visual_video CASCADE CONSTRAINTS;

DROP SEQUENCE seq_categoria;

DROP SEQUENCE seq_chamado;

DROP SEQUENCE seq_cliente;

DROP SEQUENCE seq_produto;

-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE t_sgv77_aval_produto (
    id_aval_prod  NUMBER(5) NOT NULL,
    id_produto    NUMBER NOT NULL,
    id_cliente    NUMBER(10) NOT NULL,
    nt_produto    NUMBER(2) NOT NULL,
    ds_comentario VARCHAR2(100),
    dt_avaliacao  TIMESTAMP NOT NULL
);

COMMENT ON COLUMN t_sgv77_aval_produto.id_aval_prod IS
    'este atributo define a chave primaria da Avaliacao Produto.
';

COMMENT ON COLUMN t_sgv77_aval_produto.id_produto IS
    'este atributo define o produto da Avaliacao Produto.';

COMMENT ON COLUMN t_sgv77_aval_produto.id_cliente IS
    'este atributo define o cliente da Avaliacao Produto.';

COMMENT ON COLUMN t_sgv77_aval_produto.nt_produto IS
    'este atributo define a nota do produto da Avaliacao Produto.';

COMMENT ON COLUMN t_sgv77_aval_produto.ds_comentario IS
    'este atributo define o comentario da Avaliacao Produto.';

COMMENT ON COLUMN t_sgv77_aval_produto.dt_avaliacao IS
    'este atributo define a data do comentario da Avaliacao Produto.';

ALTER TABLE t_sgv77_aval_produto
    ADD CONSTRAINT ck_aval_produto CHECK ( nt_produto >= 1
                                           AND nt_produto <= 10 );

ALTER TABLE t_sgv77_aval_produto ADD CONSTRAINT pk_avalproduto PRIMARY KEY ( id_aval_prod );

CREATE TABLE t_sgv77_bairro (
    id_bairro NUMBER NOT NULL,
    id_cidade NUMBER NOT NULL,
    nm_bairro VARCHAR2(40) NOT NULL
);

COMMENT ON COLUMN t_sgv77_bairro.id_bairro IS
    'este atributo define a chave primaria em Bairro.';

COMMENT ON COLUMN t_sgv77_bairro.id_cidade IS
    'este atributo define a cidade em Bairro.';

COMMENT ON COLUMN t_sgv77_bairro.nm_bairro IS
    'este atributo define o nome em Bairro.';

ALTER TABLE t_sgv77_bairro ADD CONSTRAINT pk_bairro PRIMARY KEY ( id_bairro );

CREATE TABLE t_sgv77_cat_produto (
    id_categoria     NUMBER(3) NOT NULL,
    ds_descricao     VARCHAR2(40) NOT NULL,
    dt_inicio        DATE NOT NULL,
    dt_termino       DATE,
    ds_statuscatprod CHAR(1)
);

COMMENT ON COLUMN t_sgv77_cat_produto.id_categoria IS
    'este atributo define a chave primária da Categoria Produto.';

COMMENT ON COLUMN t_sgv77_cat_produto.ds_descricao IS
    'este atributo define a descricao da Categoria Produto.';

COMMENT ON COLUMN t_sgv77_cat_produto.dt_inicio IS
    'este atributo define a data de inicio da Categoria Produto.
';

COMMENT ON COLUMN t_sgv77_cat_produto.dt_termino IS
    'este atributo define a data de termino da Categoria Produto.';

COMMENT ON COLUMN t_sgv77_cat_produto.ds_statuscatprod IS
    'este atributo define o status de categoria prod.';

ALTER TABLE t_sgv77_cat_produto
    ADD CONSTRAINT ck_cat_prod_ativoinativo CHECK ( ds_statuscatprod IN ( 'A', 'I' ) );

ALTER TABLE t_sgv77_cat_produto
    ADD CONSTRAINT ck_cat_prod_inativose CHECK ( ( dt_termino IS NULL )
                                                 OR ( ds_statuscatprod = 'I' ) );

ALTER TABLE t_sgv77_cat_produto ADD CONSTRAINT t_sgv77_cat_produto_pk PRIMARY KEY ( id_categoria );

ALTER TABLE t_sgv77_cat_produto ADD CONSTRAINT un_catproduto_ds_descricao UNIQUE ( ds_descricao );

CREATE TABLE t_sgv77_cat_videos (
    id_cat_videos    NUMBER(5) NOT NULL,
    ds_classificacao VARCHAR2(30) NOT NULL,
    ds_statuscatvid  VARCHAR2(20)
);

COMMENT ON COLUMN t_sgv77_cat_videos.id_cat_videos IS
    'este atributo define a chave primaria da Cat. Videos.';

COMMENT ON COLUMN t_sgv77_cat_videos.ds_classificacao IS
    'este atributo define a classificacao da Cat. Videos.';

ALTER TABLE t_sgv77_cat_videos
    ADD CONSTRAINT ck_cat_videos CHECK ( ds_statuscatvid IN ( 'A', 'I' ) );

ALTER TABLE t_sgv77_cat_videos ADD CONSTRAINT pk_cat_videos PRIMARY KEY ( id_cat_videos );

ALTER TABLE t_sgv77_cat_videos ADD CONSTRAINT un_catvideos_ds_classificacao UNIQUE ( ds_classificacao );

CREATE TABLE t_sgv77_chamado (
    id_chamado        NUMBER(5) NOT NULL,
    id_produto        NUMBER NOT NULL,
    cd_funcionario    NUMBER(3) NOT NULL,
    id_cliente        NUMBER(10) NOT NULL,
    dt_abert_cham     TIMESTAMP NOT NULL,
    dt_fech_atend     TIMESTAMP,
    indice_satisfacao NUMBER(2),
    ds_texto          VARCHAR2(4000) NOT NULL,
    dt_abert_atend    TIMESTAMP,
    ds_tpchamado      CHAR(1) NOT NULL,
    ds_statuschamado  CHAR(1)
);

COMMENT ON COLUMN t_sgv77_chamado.id_chamado IS
    'este atributo define a chave primaria em Chamado.';

COMMENT ON COLUMN t_sgv77_chamado.id_produto IS
    'este atributo define o produto em Chamado.';

COMMENT ON COLUMN t_sgv77_chamado.cd_funcionario IS
    'este atributo define o funcionario em Chamado.';

COMMENT ON COLUMN t_sgv77_chamado.id_cliente IS
    'este atributo define o cliente em Chamado.';

COMMENT ON COLUMN t_sgv77_chamado.dt_abert_cham IS
    'este atributo define a data de abertura do chamado em Chamado.';

COMMENT ON COLUMN t_sgv77_chamado.dt_fech_atend IS
    'este atributo define a data de fechamento do atendimento em Chamado.';

COMMENT ON COLUMN t_sgv77_chamado.indice_satisfacao IS
    'este atributo define o indice de statisfacao em Chamado.';

COMMENT ON COLUMN t_sgv77_chamado.ds_texto IS
    'este atributo define o texto em Chamado.';

COMMENT ON COLUMN t_sgv77_chamado.dt_abert_atend IS
    'este atributo define a data de abertura do atendimento em Chamado.';

COMMENT ON COLUMN t_sgv77_chamado.ds_tpchamado IS
    'este atributo define o tipo chamado.';

COMMENT ON COLUMN t_sgv77_chamado.ds_statuschamado IS
    'este atributo define o status chamado.';

ALTER TABLE t_sgv77_chamado
    ADD CONSTRAINT ck_chamado_nota CHECK ( indice_satisfacao >= 1
                                           AND indice_satisfacao <= 10 );

ALTER TABLE t_sgv77_chamado
    ADD CONSTRAINT ck_chamado_status CHECK ( ds_statuschamado IN ( 'A', 'E', 'F', 'X', 'C' ) );

ALTER TABLE t_sgv77_chamado
    ADD CONSTRAINT ck_chamado_tipo CHECK ( ds_tpchamado IN ( '1', '2' ) );

ALTER TABLE t_sgv77_chamado ADD CONSTRAINT pk_chamado PRIMARY KEY ( id_chamado );

CREATE TABLE t_sgv77_cidade (
    id_cidade NUMBER NOT NULL,
    id_uf     NUMBER NOT NULL,
    nm_cidade VARCHAR2(40) NOT NULL
);

COMMENT ON COLUMN t_sgv77_cidade.id_cidade IS
    'este atributo define a chave primaria em Cidade.';

COMMENT ON COLUMN t_sgv77_cidade.id_uf IS
    'este atributo define a UF em Cidade.';

COMMENT ON COLUMN t_sgv77_cidade.nm_cidade IS
    'este atributo define nome em Cidade.';

ALTER TABLE t_sgv77_cidade ADD CONSTRAINT pk_cidade PRIMARY KEY ( id_cidade );

CREATE TABLE t_sgv77_cliente (
    id_cliente       NUMBER(10) NOT NULL,
    ds_nome          VARCHAR2(30) NOT NULL,
    ds_email         VARCHAR2(30) NOT NULL,
    nr_telefone      NUMBER(9) NOT NULL,
    id_endereco      NUMBER(10) NOT NULL,
    qt_estrela       NUMBER(1),
    ds_statuscliente CHAR(1) NOT NULL,
    nm_idenfiticador VARCHAR2(10)
);

COMMENT ON COLUMN t_sgv77_cliente.id_cliente IS
    'este atributo define a chave primaria em Cliente.';

COMMENT ON COLUMN t_sgv77_cliente.ds_nome IS
    'este atributo define o nome em Cliente.';

COMMENT ON COLUMN t_sgv77_cliente.ds_email IS
    'este atributo define o email em Cliente.';

COMMENT ON COLUMN t_sgv77_cliente.id_endereco IS
    'este atributo define o endereco em Cliente.';

COMMENT ON COLUMN t_sgv77_cliente.qt_estrela IS
    'este atributo define a qte. de estrelas em Cliente.';

COMMENT ON COLUMN t_sgv77_cliente.ds_statuscliente IS
    'este atributo define o status de cliente.';

COMMENT ON COLUMN t_sgv77_cliente.nm_idenfiticador IS
    'esse atributo discrimina a entidade cliente.';

ALTER TABLE t_sgv77_cliente
    ADD CONSTRAINT ck_cliente_atvinativprosp CHECK ( ds_statuscliente IN ( 'A', 'I' ) );

ALTER TABLE t_sgv77_cliente ADD CONSTRAINT pk_cliente PRIMARY KEY ( id_cliente );

ALTER TABLE t_sgv77_cliente ADD CONSTRAINT un_cliente_ds_email UNIQUE ( ds_email );

CREATE TABLE t_sgv77_depto (
    id_depto       NUMBER(3) NOT NULL,
    cd_funcionario NUMBER(3) NOT NULL,
    cd_dpto        NUMBER(3) NOT NULL,
    ds_dpto        VARCHAR2(20) NOT NULL
);

COMMENT ON COLUMN t_sgv77_depto.id_depto IS
    'este atributo define a chave primaria do Depto.';

COMMENT ON COLUMN t_sgv77_depto.cd_funcionario IS
    'este atributo define o funcionario do Depto.';

COMMENT ON COLUMN t_sgv77_depto.cd_dpto IS
    'este atributo define o codigo do Depto.';

COMMENT ON COLUMN t_sgv77_depto.ds_dpto IS
    'este atributo define a descricao do Depto.';

ALTER TABLE t_sgv77_depto ADD CONSTRAINT pk_depto PRIMARY KEY ( id_depto );

ALTER TABLE t_sgv77_depto ADD CONSTRAINT un_depto_cd_dpto UNIQUE ( cd_dpto );

ALTER TABLE t_sgv77_depto ADD CONSTRAINT un_depto_ds_dpto UNIQUE ( ds_dpto );

CREATE TABLE t_sgv77_endereco (
    id_endereco   NUMBER(10) NOT NULL,
    id_logradouro NUMBER NOT NULL,
    id_cliente    NUMBER(10) NOT NULL,
    ds_logradouro VARCHAR2(50) NOT NULL
);

COMMENT ON COLUMN t_sgv77_endereco.id_endereco IS
    'este atributo define a chave primaria em Endereco.';

COMMENT ON COLUMN t_sgv77_endereco.id_logradouro IS
    'este atributo define o logradouro em Endereco.';

COMMENT ON COLUMN t_sgv77_endereco.id_cliente IS
    'este atributo define o cliente em Endereco.';

COMMENT ON COLUMN t_sgv77_endereco.ds_logradouro IS
    'este atributo define a descricao do logradouro em Endereco.';

ALTER TABLE t_sgv77_endereco ADD CONSTRAINT pk_endereco PRIMARY KEY ( id_endereco );

CREATE TABLE t_sgv77_fone_cliente (
    id_tel_cliente NUMBER(10) NOT NULL,
    id_cliente     NUMBER(10) NOT NULL,
    cd_ddd         NUMBER(3) NOT NULL,
    nm_tel         NUMBER(9) NOT NULL
);

COMMENT ON COLUMN t_sgv77_fone_cliente.id_tel_cliente IS
    'este atributo define a chave primaria em Fone Cliente.';

COMMENT ON COLUMN t_sgv77_fone_cliente.id_cliente IS
    'este atributo define o cliente em Fone Cliente.';

COMMENT ON COLUMN t_sgv77_fone_cliente.cd_ddd IS
    'este atributo define o ddd em Fone Cliente.';

COMMENT ON COLUMN t_sgv77_fone_cliente.nm_tel IS
    'este atributo define o numero em Fone Cliente.';

ALTER TABLE t_sgv77_fone_cliente ADD CONSTRAINT pk_fonecliente PRIMARY KEY ( id_tel_cliente );

CREATE TABLE t_sgv77_fone_ddd (
    cd_ddd NUMBER(3) NOT NULL,
    nr_ddd NUMBER(3)
);

COMMENT ON COLUMN t_sgv77_fone_ddd.cd_ddd IS
    'este atributo define a chave primaria em DDD.';

COMMENT ON COLUMN t_sgv77_fone_ddd.nr_ddd IS
    'este atributo define o numero do DDD em DDD.';

ALTER TABLE t_sgv77_fone_ddd ADD CONSTRAINT pk_foneddd PRIMARY KEY ( cd_ddd );

CREATE TABLE t_sgv77_fone_funcionario (
    id_tel_funcionario NUMBER(5) NOT NULL,
    cd_ddd             NUMBER(3) NOT NULL,
    cd_funcionario     NUMBER(3) NOT NULL,
    nr_telefone        NUMBER(9)
);

COMMENT ON COLUMN t_sgv77_fone_funcionario.id_tel_funcionario IS
    'este atributo define a chave primaria em Fone Funcionario.';

COMMENT ON COLUMN t_sgv77_fone_funcionario.cd_ddd IS
    'este atributo define o DDD em Fone Funcionario.';

COMMENT ON COLUMN t_sgv77_fone_funcionario.cd_funcionario IS
    'este atributo define o funcionario em Fone Funcionario.';

COMMENT ON COLUMN t_sgv77_fone_funcionario.nr_telefone IS
    'este atributo define o numero de telefone em Fone Funcionario.';

ALTER TABLE t_sgv77_fone_funcionario ADD CONSTRAINT pk_fonefuncionario PRIMARY KEY ( id_tel_funcionario );

CREATE TABLE t_sgv77_funcionario (
    cd_funcionario NUMBER(3) NOT NULL,
    cd_cpf         NUMBER(11) NOT NULL,
    ds_email       VARCHAR2(30) NOT NULL,
    ds_cargo       VARCHAR2(30) NOT NULL,
    nm_funcionario VARCHAR2(50) NOT NULL,
    dt_nasc        DATE NOT NULL,
    vl_salario     NUMBER(8, 2) NOT NULL,
    cd_sexo        CHAR(1) NOT NULL,
    dt_admissao    DATE NOT NULL
);

COMMENT ON COLUMN t_sgv77_funcionario.cd_funcionario IS
    'este atributo define a chave primaria do Funcionario.';

COMMENT ON COLUMN t_sgv77_funcionario.cd_cpf IS
    'este atributo define o CPF do Funcionario.';

COMMENT ON COLUMN t_sgv77_funcionario.ds_email IS
    'este atributo define o email do Funcionario.';

COMMENT ON COLUMN t_sgv77_funcionario.ds_cargo IS
    'este atributo define a descricao do cargo do Funcionario.';

COMMENT ON COLUMN t_sgv77_funcionario.nm_funcionario IS
    'este atributo define o nome do Funcionario.';

COMMENT ON COLUMN t_sgv77_funcionario.dt_nasc IS
    'este atributo define a data de nasc. do Funcionario.';

COMMENT ON COLUMN t_sgv77_funcionario.vl_salario IS
    'este atributo define o salario do Funcionario.';

COMMENT ON COLUMN t_sgv77_funcionario.cd_sexo IS
    'este atributo define o sexo do Funcionario.';

COMMENT ON COLUMN t_sgv77_funcionario.dt_admissao IS
    'este atributo define a data de admissao do Funcionario.';

ALTER TABLE t_sgv77_funcionario ADD CONSTRAINT pk_funcionario PRIMARY KEY ( cd_funcionario );

ALTER TABLE t_sgv77_funcionario ADD CONSTRAINT un_funcionario_cd_cpf UNIQUE ( cd_cpf );

ALTER TABLE t_sgv77_funcionario ADD CONSTRAINT un_funcionario_ds_email UNIQUE ( ds_email );

CREATE TABLE t_sgv77_item_pedido (
    nr_pedido   NUMBER NOT NULL,
    nr_item     NUMBER NOT NULL,
    id_produto  NUMBER NOT NULL,
    qte_vendida NUMBER(1),
    vl_unitario NUMBER(10, 2)
);

COMMENT ON COLUMN t_sgv77_item_pedido.nr_item IS
    'este atributo define a chave primaria do Item Pedido.';

COMMENT ON COLUMN t_sgv77_item_pedido.id_produto IS
    'este atributo define o produto do Item Pedido.';

COMMENT ON COLUMN t_sgv77_item_pedido.qte_vendida IS
    'este atributo define a quantidade vendida do Item Pedido.';

COMMENT ON COLUMN t_sgv77_item_pedido.vl_unitario IS
    'este atributo define o valor unitario do Item Pedido.';

ALTER TABLE t_sgv77_item_pedido ADD CONSTRAINT pk_itempedido PRIMARY KEY ( nr_pedido,
                                                                           nr_item );

CREATE TABLE t_sgv77_login (
    id_login         NUMBER NOT NULL,
    id_cliente       NUMBER(10),
    ds_senha         VARCHAR2(30) NOT NULL,
    nm_usuario       VARCHAR2(30) NOT NULL,
    is_authenticated CHAR(1)
);

COMMENT ON COLUMN t_sgv77_login.id_login IS
    'este atributo define a chave priamria de Login.';

COMMENT ON COLUMN t_sgv77_login.id_cliente IS
    'este atributo define o cliente de Login.';

COMMENT ON COLUMN t_sgv77_login.ds_senha IS
    'este atributo define a senha de Login.';

COMMENT ON COLUMN t_sgv77_login.nm_usuario IS
    'este atributo define o usuario de Login.';

COMMENT ON COLUMN t_sgv77_login.is_authenticated IS
    'este atributo define se houve login em Login.';

ALTER TABLE t_sgv77_login ADD CONSTRAINT pk_login PRIMARY KEY ( id_login );

ALTER TABLE t_sgv77_login ADD CONSTRAINT un_login_nm_usuario UNIQUE ( nm_usuario );

CREATE TABLE t_sgv77_pedido (
    nr_pedido   NUMBER NOT NULL,
    id_endereco NUMBER(10) NOT NULL,
    id_cliente  NUMBER(10) NOT NULL,
    dt_pedido   DATE NOT NULL
);

COMMENT ON COLUMN t_sgv77_pedido.nr_pedido IS
    'este atributo define a chave primaria em Pedido.';

COMMENT ON COLUMN t_sgv77_pedido.id_cliente IS
    'este atributo define o cliente em Pedido.';

COMMENT ON COLUMN t_sgv77_pedido.dt_pedido IS
    'este atributo define a data em Pedido.';

ALTER TABLE t_sgv77_pedido ADD CONSTRAINT pk_pedido PRIMARY KEY ( nr_pedido );

CREATE TABLE t_sgv77_pf (
    id_cliente        NUMBER(10) NOT NULL,
    nr_cpf            NUMBER(11) NOT NULL,
    dt_nasc           DATE NOT NULL,
    ds_sexo_biologico VARCHAR2(9) NOT NULL,
    ds_genero_nasc    VARCHAR2(30)
);

COMMENT ON COLUMN t_sgv77_pf.id_cliente IS
    'este atributo define a chave primaria estrangeira em Pessoa Fisica.';

COMMENT ON COLUMN t_sgv77_pf.nr_cpf IS
    'este atributo define o CPF em Pessoa Fisica.';

COMMENT ON COLUMN t_sgv77_pf.dt_nasc IS
    'este atributo define a data de nasc. em Pessoa Fisica.';

COMMENT ON COLUMN t_sgv77_pf.ds_sexo_biologico IS
    'este atributo define o sexo biologico em Pessoa Fisica.';

COMMENT ON COLUMN t_sgv77_pf.ds_genero_nasc IS
    'este atributo define o genero de nasc. em Pessoa Fisica.';

CREATE UNIQUE INDEX t_sgv77_pf__idx ON
    t_sgv77_pf (
        id_cliente
    ASC );

ALTER TABLE t_sgv77_pf ADD CONSTRAINT pk_pf PRIMARY KEY ( id_cliente );

ALTER TABLE t_sgv77_pf ADD CONSTRAINT un_pf_nr_cpf UNIQUE ( nr_cpf );

CREATE TABLE t_sgv77_pj (
    id_cliente    NUMBER(10) NOT NULL,
    nr_cnpj       NUMBER(14),
    nr_insc_estad NUMBER(9),
    dt_fundacao   DATE
);

COMMENT ON COLUMN t_sgv77_pj.id_cliente IS
    'este atributo define a chave primaria estrangeira em Pessoa Juridica.';

COMMENT ON COLUMN t_sgv77_pj.nr_cnpj IS
    'este atributo define o CNPJ em Pessoa Juridica.';

COMMENT ON COLUMN t_sgv77_pj.nr_insc_estad IS
    'este atributo define a inscricao estadual em Pessoa Juridica.';

COMMENT ON COLUMN t_sgv77_pj.dt_fundacao IS
    'este atributo define a data de fundacao em Pessoa Juridica.';

CREATE UNIQUE INDEX t_sgv77_pj__idx ON
    t_sgv77_pj (
        id_cliente
    ASC );

ALTER TABLE t_sgv77_pj ADD CONSTRAINT pk_pj PRIMARY KEY ( id_cliente );

ALTER TABLE t_sgv77_pj ADD CONSTRAINT un_pj_nr_cnpj UNIQUE ( nr_cnpj );

ALTER TABLE t_sgv77_pj ADD CONSTRAINT un_pj_nr_inscr_estadual UNIQUE ( nr_insc_estad );

CREATE TABLE t_sgv77_produto (
    id_produto     NUMBER NOT NULL,
    id_categoria   NUMBER(3) NOT NULL,
    ds_normal      VARCHAR2(40) NOT NULL,
    cd_barra_ean13 NUMBER(13),
    ds_completa    VARCHAR2(60) NOT NULL,
    vl_unitario    NUMBER(5, 2) NOT NULL,
    id_statusprod  CHAR(1) NOT NULL
);

COMMENT ON COLUMN t_sgv77_produto.id_produto IS
    'este atributo define a chave primaria do Produto.';

COMMENT ON COLUMN t_sgv77_produto.id_categoria IS
    'este atributo define categoria do Produto.';

COMMENT ON COLUMN t_sgv77_produto.ds_normal IS
    'este atributo define a descricao normal do Produto.';

COMMENT ON COLUMN t_sgv77_produto.cd_barra_ean13 IS
    'este atributo define o codigo ean13 do Produto.';

COMMENT ON COLUMN t_sgv77_produto.ds_completa IS
    'este atributo define a descricao completa do Produto.';

COMMENT ON COLUMN t_sgv77_produto.vl_unitario IS
    'este atributo define o valor unitario do Produto.';

COMMENT ON COLUMN t_sgv77_produto.id_statusprod IS
    'este atributo define o status de produto.';

ALTER TABLE t_sgv77_produto
    ADD CONSTRAINT ck_produto_ativoinativo CHECK ( id_statusprod IN ( 'A', 'I', 'P' ) );

ALTER TABLE t_sgv77_produto ADD CONSTRAINT pk_produto PRIMARY KEY ( id_produto );

ALTER TABLE t_sgv77_produto ADD CONSTRAINT un_produto_dsean13 UNIQUE ( cd_barra_ean13 );

ALTER TABLE t_sgv77_produto ADD CONSTRAINT un_produto_dsnormal UNIQUE ( ds_normal );

CREATE TABLE t_sgv77_tipo_logradouro (
    id_logradouro NUMBER NOT NULL,
    id_bairro     NUMBER NOT NULL,
    nm_logradouro VARCHAR2(20) NOT NULL
);

COMMENT ON COLUMN t_sgv77_tipo_logradouro.id_logradouro IS
    'este atributo define a chave primaria em Logradouro.';

COMMENT ON COLUMN t_sgv77_tipo_logradouro.id_bairro IS
    'este atributo define o bairro em Logradouro.';

COMMENT ON COLUMN t_sgv77_tipo_logradouro.nm_logradouro IS
    'este atributo define o nome em Logradouro.';

ALTER TABLE t_sgv77_tipo_logradouro ADD CONSTRAINT pk_tipo_logradouro PRIMARY KEY ( id_logradouro );

CREATE TABLE t_sgv77_uf (
    id_uf NUMBER NOT NULL,
    sg_uf CHAR(2) NOT NULL,
    nm_uf VARCHAR2(20)
);

COMMENT ON COLUMN t_sgv77_uf.id_uf IS
    'este atributo define a chave primaria em UF.';

COMMENT ON COLUMN t_sgv77_uf.sg_uf IS
    'este atributo define a sigla em UF.';

COMMENT ON COLUMN t_sgv77_uf.nm_uf IS
    'este atributo define o nome em UF.';

ALTER TABLE t_sgv77_uf ADD CONSTRAINT pk_uf PRIMARY KEY ( id_uf );

ALTER TABLE t_sgv77_uf ADD CONSTRAINT un_uf_nm_uf UNIQUE ( nm_uf );

ALTER TABLE t_sgv77_uf ADD CONSTRAINT un_uf_sg_uf UNIQUE ( sg_uf );

CREATE TABLE t_sgv77_videos (
    id_video         NUMBER(5) NOT NULL,
    id_produto       NUMBER NOT NULL,
    id_cat_videos    NUMBER(5) NOT NULL,
    ds_url           VARCHAR2(2048) NOT NULL,
    ds_classificacao VARCHAR2(128) NOT NULL,
    dt_cadastro      DATE NOT NULL,
    ds_statusvideo   CHAR(1) NOT NULL
);

COMMENT ON COLUMN t_sgv77_videos.id_video IS
    'este atributo define a chave primaria de Video.';

COMMENT ON COLUMN t_sgv77_videos.id_produto IS
    'este atributo define o produto de Video.';

COMMENT ON COLUMN t_sgv77_videos.ds_url IS
    'este atributo define o url de Video.';

COMMENT ON COLUMN t_sgv77_videos.dt_cadastro IS
    'este atributo define a data de cadastro de Video.';

COMMENT ON COLUMN t_sgv77_videos.ds_statusvideo IS
    'este atributo define o status do video.';

ALTER TABLE t_sgv77_videos
    ADD CONSTRAINT ck_videos_ativoinativo CHECK ( ds_statusvideo IN ( 'A', 'I' ) );

ALTER TABLE t_sgv77_videos ADD CONSTRAINT pk_videos PRIMARY KEY ( id_video );

CREATE TABLE t_sgv77_visual_video (
    id_visualizacao NUMBER(7) NOT NULL,
    id_video        NUMBER(5) NOT NULL,
    id_login        NUMBER NOT NULL,
    dt_visualizacao TIMESTAMP NOT NULL
);

COMMENT ON COLUMN t_sgv77_visual_video.id_visualizacao IS
    'este atributo define a chave priamria da Viz. Videos.';

COMMENT ON COLUMN t_sgv77_visual_video.id_video IS
    'este atributo define o video da Viz. Videos.';

COMMENT ON COLUMN t_sgv77_visual_video.id_login IS
    'este atributo define o login da Viz. Videos.';

COMMENT ON COLUMN t_sgv77_visual_video.dt_visualizacao IS
    'este atributo define a data da visualizacao da Viz. Videos.';

ALTER TABLE t_sgv77_visual_video ADD CONSTRAINT pk_visualvideo PRIMARY KEY ( id_visualizacao );

ALTER TABLE t_sgv77_aval_produto
    ADD CONSTRAINT fk_avalprod_cliente FOREIGN KEY ( id_cliente )
        REFERENCES t_sgv77_cliente ( id_cliente );

ALTER TABLE t_sgv77_aval_produto
    ADD CONSTRAINT fk_avalprod_produto FOREIGN KEY ( id_produto )
        REFERENCES t_sgv77_produto ( id_produto );

ALTER TABLE t_sgv77_bairro
    ADD CONSTRAINT fk_bairro_cidade FOREIGN KEY ( id_cidade )
        REFERENCES t_sgv77_cidade ( id_cidade );

ALTER TABLE t_sgv77_chamado
    ADD CONSTRAINT fk_cham_cliente FOREIGN KEY ( id_cliente )
        REFERENCES t_sgv77_cliente ( id_cliente );

ALTER TABLE t_sgv77_chamado
    ADD CONSTRAINT fk_cham_funcionario FOREIGN KEY ( cd_funcionario )
        REFERENCES t_sgv77_funcionario ( cd_funcionario );

ALTER TABLE t_sgv77_chamado
    ADD CONSTRAINT fk_cham_produto FOREIGN KEY ( id_produto )
        REFERENCES t_sgv77_produto ( id_produto );

ALTER TABLE t_sgv77_cidade
    ADD CONSTRAINT fk_cidade_uf FOREIGN KEY ( id_uf )
        REFERENCES t_sgv77_uf ( id_uf );

ALTER TABLE t_sgv77_pj
    ADD CONSTRAINT fk_cliente FOREIGN KEY ( id_cliente )
        REFERENCES t_sgv77_cliente ( id_cliente );

ALTER TABLE t_sgv77_pf
    ADD CONSTRAINT fk_clientev1 FOREIGN KEY ( id_cliente )
        REFERENCES t_sgv77_cliente ( id_cliente );

ALTER TABLE t_sgv77_depto
    ADD CONSTRAINT fk_depto_funcionario FOREIGN KEY ( cd_funcionario )
        REFERENCES t_sgv77_funcionario ( cd_funcionario );

ALTER TABLE t_sgv77_endereco
    ADD CONSTRAINT fk_endereco_cliente FOREIGN KEY ( id_cliente )
        REFERENCES t_sgv77_cliente ( id_cliente );

ALTER TABLE t_sgv77_endereco
    ADD CONSTRAINT fk_endereco_tipologradouro FOREIGN KEY ( id_logradouro )
        REFERENCES t_sgv77_tipo_logradouro ( id_logradouro );

ALTER TABLE t_sgv77_fone_funcionario
    ADD CONSTRAINT fk_fonefunc_ddd FOREIGN KEY ( cd_ddd )
        REFERENCES t_sgv77_fone_ddd ( cd_ddd );

ALTER TABLE t_sgv77_fone_funcionario
    ADD CONSTRAINT fk_fonefunc_func FOREIGN KEY ( cd_funcionario )
        REFERENCES t_sgv77_funcionario ( cd_funcionario );

ALTER TABLE t_sgv77_item_pedido
    ADD CONSTRAINT fk_itemped_ped FOREIGN KEY ( nr_pedido )
        REFERENCES t_sgv77_pedido ( nr_pedido );

ALTER TABLE t_sgv77_item_pedido
    ADD CONSTRAINT fk_itemped_prod FOREIGN KEY ( id_produto )
        REFERENCES t_sgv77_produto ( id_produto );

ALTER TABLE t_sgv77_login
    ADD CONSTRAINT fk_login_cliente FOREIGN KEY ( id_cliente )
        REFERENCES t_sgv77_cliente ( id_cliente );

ALTER TABLE t_sgv77_pedido
    ADD CONSTRAINT fk_pedido_cliente FOREIGN KEY ( id_cliente )
        REFERENCES t_sgv77_cliente ( id_cliente );

ALTER TABLE t_sgv77_pedido
    ADD CONSTRAINT fk_pedido_endereco FOREIGN KEY ( id_endereco )
        REFERENCES t_sgv77_endereco ( id_endereco );

ALTER TABLE t_sgv77_produto
    ADD CONSTRAINT fk_prod_catproduto FOREIGN KEY ( id_categoria )
        REFERENCES t_sgv77_cat_produto ( id_categoria );

ALTER TABLE t_sgv77_fone_cliente
    ADD CONSTRAINT fk_tel_cliente FOREIGN KEY ( id_cliente )
        REFERENCES t_sgv77_cliente ( id_cliente );

ALTER TABLE t_sgv77_fone_cliente
    ADD CONSTRAINT fk_tel_foneddd FOREIGN KEY ( cd_ddd )
        REFERENCES t_sgv77_fone_ddd ( cd_ddd );

ALTER TABLE t_sgv77_tipo_logradouro
    ADD CONSTRAINT fk_tipologradouro_bairro FOREIGN KEY ( id_bairro )
        REFERENCES t_sgv77_bairro ( id_bairro );

ALTER TABLE t_sgv77_videos
    ADD CONSTRAINT fk_vid_catvideos FOREIGN KEY ( id_cat_videos )
        REFERENCES t_sgv77_cat_videos ( id_cat_videos );

ALTER TABLE t_sgv77_videos
    ADD CONSTRAINT fk_vid_produto FOREIGN KEY ( id_produto )
        REFERENCES t_sgv77_produto ( id_produto );

ALTER TABLE t_sgv77_visual_video
    ADD CONSTRAINT fk_visualvid_login FOREIGN KEY ( id_login )
        REFERENCES t_sgv77_login ( id_login );

ALTER TABLE t_sgv77_visual_video
    ADD CONSTRAINT fk_visualvid_videos FOREIGN KEY ( id_video )
        REFERENCES t_sgv77_videos ( id_video );

CREATE OR REPLACE TRIGGER arc_arc_2_t_sgv77_pf BEFORE
    INSERT OR UPDATE OF id_cliente ON t_sgv77_pf
    FOR EACH ROW
DECLARE
    d VARCHAR2(10);
BEGIN
    SELECT
        a.nm_idenfiticador
    INTO d
    FROM
        t_sgv77_cliente a
    WHERE
        a.id_cliente = :new.id_cliente;

    IF ( d IS NULL OR d <> 'T_SGV77_PF' ) THEN
        raise_application_error(-20223, 'FK FK_CLIENTEv1 in Table T_SGV77_PF violates Arc constraint on Table T_SGV77_CLIENTE - discriminator column nm_idenfiticador doesn''t have value ''T_SGV77_PF'''
        );
    END IF;

EXCEPTION
    WHEN no_data_found THEN
        NULL;
    WHEN OTHERS THEN
        RAISE;
END;
/

CREATE OR REPLACE TRIGGER arc_arc_2_t_sgv77_pj BEFORE
    INSERT OR UPDATE OF id_cliente ON t_sgv77_pj
    FOR EACH ROW
DECLARE
    d VARCHAR2(10);
BEGIN
    SELECT
        a.nm_idenfiticador
    INTO d
    FROM
        t_sgv77_cliente a
    WHERE
        a.id_cliente = :new.id_cliente;

    IF ( d IS NULL OR d <> 'T_SGV77_PJ' ) THEN
        raise_application_error(-20223, 'FK FK_CLIENTE in Table T_SGV77_PJ violates Arc constraint on Table T_SGV77_CLIENTE - discriminator column nm_idenfiticador doesn''t have value ''T_SGV77_PJ'''
        );
    END IF;

EXCEPTION
    WHEN no_data_found THEN
        NULL;
    WHEN OTHERS THEN
        RAISE;
END;
/

CREATE SEQUENCE seq_categoria START WITH 1 NOCACHE ORDER;

CREATE SEQUENCE seq_chamado START WITH 1 MAXVALUE 9999999999 NOCACHE ORDER;

CREATE SEQUENCE seq_cliente START WITH 1 NOCACHE ORDER;

CREATE SEQUENCE seq_produto START WITH 1 NOCACHE ORDER;



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            23
-- CREATE INDEX                             2
-- ALTER TABLE                             75
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           2
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          4
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
